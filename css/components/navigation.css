/**
 * @file
 * Enables Bootstrap 5 multi-level flyout
 */

/* Only for mobile */
@media (max-width: 767px) {

  nav.menu--main {
    margin-left: 16px;
    width: 100%;
    padding-bottom: 12px;
  }

  /* Enables first level dropdown from main nav links */
  a.nav-link .dropdown>.dropdown-menu.show {
      display: block;
      border: 0;
      margin-top: 5px !important;
  }

  ul.dropdown-menu {
    border: 0;
  }

  .dropdown-menu .menu-item--expanded>a:after {
    visibility: hidden;
  }

  ul.dropdown-menu.show li.menu-item--expanded>ul.dropdown-menu {
    display: block;
    border: 0;
  }

}

/* Only for non-mobile */
@media (min-width: 768px) {

  /* Enables first level dropdown from main nav links */
  .dropdown:hover>.dropdown-menu {
    display: block;
  }

}

/* Force manu items with no link to still use pointer */
span.nav-link {
  cursor: pointer;
}

.dropdown-menu .menu-item--expanded:hover>a:after {
  visibility: hidden;
}

.dropdown-menu .menu-item--expanded:hover {
  border-right: 1px solid #fff;
}

/* Enables next level dropdowns to go horizontal */
.dropdown-menu .menu-item--expanded>.dropdown-menu {
  top: 0px;
  left: 100%;
  margin-top: -1px;
  margin-left: 0px;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
}

/* Creates right arrow which vanishes on rollover/expansion */
.dropdown-menu .menu-item--expanded>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #ccc;
  margin-top: 7px;
  margin-right: -5px;
}

.dropdown-item {
  padding: 5px 15px;
}
/* Remove margin and padding around each flyout's containing UL, so that there is no "gap" where hover does not function, and flyouts vanish as you roll over the gap */
ul.dropdown-menu {
  padding: 0;
  margin: 0;
}

/* Make sure links in the active trail reverse out to white so that they do not diappear when the LIs highlight */
.dropdown-menu li.active>a {
  color: #fff;
}

/* Custom: Disable dropdown behavior for sidebar menus when the sidebar-menu-flat class is present */
.sidebar-menu-flat .menu .dropdown-menu {
  position: static !important;
  display: flex !important;
  flex-direction: column !important;
  visibility: visible !important;
  opacity: 1 !important;
  box-shadow: none !important;
  border: none !important;
  padding-left: var(--mh-space-md) !important;
  top: auto !important;
  left: auto !important;
  transform: none !important;
  margin-top: 0 !important;
  min-width: unset !important;
}

/* Custom: Ensure sub-menu items are always block level and flow vertically in flat sidebar menus */
.sidebar-menu-flat .menu .dropdown-menu .dropdown-item {
  display: block !important;
  padding: var(--mh-space-xs) var(--mh-space-sm) !important;
  background-color: transparent !important;
  color: var(--mh-color-neutral-800) !important;
}

/* Custom: Remove any togglers that might appear in flat sidebar menus */
.sidebar-menu-flat .menu .dropdown-toggle::after {
  display: none !important;
}

/* Custom: Ensure parent menu items of expanded sub-menus don't have special active styles that might look like dropdown indicators in flat sidebar menus */
.sidebar-menu-flat .menu .menu-item--expanded > a.nav-link {
  margin-bottom: 0 !important;
  border-bottom: none !important;
}